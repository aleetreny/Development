<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Real Scroll: 1:1 Scale</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            /* 1 meter = Calculated via JS */
            /* Default Surface Colors (The Blueprint) */
            --bg-surface: #f4f1ea;
            --ink: #333333;
            --accent: #ff4400;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            width: 100vw;
            overflow-x: hidden;
            transition: filter 0.5s ease;
        }

        body {
            font-family: 'Space Mono', monospace;
            background-color: var(--bg-surface);
            color: var(--ink);
            width: 100%;
            /* Fixed loop height handled in JS, but we set a safe default */
            height: 200000px; 
            /* Smooth transitions for biome changes */
            transition: background-color 2.5s ease, color 2.5s ease;
        }

        /* --- THE RULER --- */
        #ruler {
            position: fixed;
            top: 0;
            left: 0;
            width: 60px;
            height: 100vh;
            border-right: 1px solid var(--ink);
            z-index: 100;
            /* Default Surface Ruler */
            background-image: 
                linear-gradient(90deg, var(--ink) 0%, var(--ink) 100%),
                linear-gradient(90deg, rgba(51, 51, 51, 0.3) 0%, rgba(51, 51, 51, 0.3) 100%);
            /* Background size is set in JS */
            background-repeat: repeat-y;
            background-position: 0 0;
            will-change: background-position;
            transition: border-color 2.5s ease;
        }

        #ruler::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--accent);
            box-shadow: 0 2px 4px rgba(255, 68, 0, 0.4);
            z-index: 101;
        }

        /* --- HUD --- */
        #hud {
            position: fixed;
            top: 20px;
            right: 20px;
            text-align: right;
            z-index: 200;
            background: rgba(244, 241, 234, 0.9);
            padding: 10px;
            border: 1px solid var(--ink);
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
            transition: all 0.5s ease;
            cursor: pointer;
            user-select: none;
            transform-origin: center center;
        }

        #depth-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            font-variant-numeric: tabular-nums;
            letter-spacing: -1px;
            display: block;
            line-height: 1;
        }

        #depth-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.7;
        }

        /* --- CONTENT --- */
        #world-container {
            position: fixed; /* Fixed viewport for the virtual rendering */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        /* Shake Animation for Turbulence */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .shake-screen {
            animation: shake 0.5s;
            animation-iteration-count: infinite;
        }

        /* Flicker Animation for 13m and Glitch Entry */
        @keyframes bad-luck-flicker {
            0% { background-color: black; filter: invert(1); }
            50% { background-color: black; filter: invert(0); }
            100% { background-color: var(--bg-surface); filter: invert(0); }
        }
        .bad-luck {
            animation: bad-luck-flicker 0.2s;
        }

        /* Glitch Animation for 404 */
        @keyframes glitch-skew {
            0% { transform: skew(0deg); }
            20% { transform: skew(-10deg); }
            40% { transform: skew(10deg); }
            60% { transform: skew(-5deg); }
            80% { transform: skew(5deg); }
            100% { transform: skew(0deg); }
        }
        
        .hud-glitch {
            animation: glitch-skew 0.3s infinite;
            color: red !important;
            text-shadow: 2px 2px #000;
        }
        .hud-glitch #depth-label {
            content: "FLOOR NOT FOUND";
        }

        /* THE ANSWER (42) */
        .hud-answer #depth-display { color: #FFD700 !important; text-shadow: 0px 0px 10px rgba(255, 215, 0, 0.5); }
        .hud-answer #depth-label { color: #FFD700 !important; }

        /* EVIL NUMBER (6.66) */
        .hud-evil #depth-display { color: #ff0000 !important; }
        .hud-evil #depth-label { color: #ff0000 !important; }

        /* ROTATED (33) */
        .hud-rotated { transform: rotate(180deg); }

        /* JACKPOT (77.77) */
        .hud-jackpot #depth-display { color: #2ecc71 !important; text-shadow: 0px 0px 5px #f1c40f; }
        .hud-jackpot #depth-label { color: #2ecc71 !important; }

        /* --- VISUAL EASTER EGGS --- */
        
        /* 51m: Alien Mode */
        .egg-alien {
            filter: sepia(1) hue-rotate(100deg) contrast(1.2) saturate(5) !important;
        }

        /* 69m: Disco Mode */
        @keyframes disco-bg {
            0% { background-color: #ff0000; color: #ffff00; }
            20% { background-color: #00ff00; color: #ff00ff; }
            40% { background-color: #0000ff; color: #ffffff; }
            60% { background-color: #ffff00; color: #0000ff; }
            80% { background-color: #ff00ff; color: #00ff00; }
            100% { background-color: #00ffff; color: #ff0000; }
        }
        .egg-disco {
            animation: disco-bg 0.5s infinite linear !important;
        }

        /* 88m: Speed Mode */
        .egg-speed {
            transform: skewX(-20deg) !important;
            transition: transform 0.2s;
        }

        /* -11.11m: Mirror Mode */
        .egg-mirror {
            transform: scaleX(-1);
        }

        /* 44.44m: Ghost Mode */
        .egg-ghost {
            filter: blur(2px);
            opacity: 0.2;
        }

        .milestone {
            position: fixed; /* Changed to fixed for Treadmill logic */
            left: 80px;
            width: calc(100% - 100px);
            border-top: 1px dashed var(--ink);
            padding-top: 5px;
            padding-left: 10px;
            font-size: 1rem;
            line-height: 1.4;
            will-change: transform;
            transition: border-color 2.5s ease, color 2.5s ease;
            /* Initially hidden, moved into view via JS */
            top: 0; 
            transform: translateY(-9999px);
        }

        .milestone::before {
            content: attr(data-depth);
            display: block;
            font-size: 0.75rem;
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 4px;
        }

        .milestone.major {
            border-top: 2px solid var(--ink);
            font-weight: 700;
            font-size: 1.2rem;
        }

        /* --- INTRO --- */
        #intro {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            background: var(--bg-surface);
            border: 2px solid var(--ink);
            padding: 40px;
            z-index: 1000;
            box-shadow: 10px 10px 0 var(--ink);
            text-align: center;
        }

        #intro h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--accent);
        }

        #start-btn {
            background: var(--ink);
            color: var(--bg-surface);
            border: none;
            padding: 15px 30px;
            font-family: inherit;
            font-size: 1.2rem;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            transition: transform 0.1s;
        }

        #start-btn:hover {
            transform: scale(1.05);
            background: var(--accent);
        }

        /* --- BIOMES --- */

        /* 0. THE MINUS WORLD (< 0m) */
        body.biome-minus {
            background-color: #220022; /* Deep Glitch Purple */
            color: #00ff00; /* Terminal Green */
        }
        body.biome-minus #ruler {
            border-right-color: #00ff00;
            background-image: 
                linear-gradient(90deg, #00ff00 0%, #00ff00 100%),
                linear-gradient(90deg, rgba(0, 255, 0, 0.3) 0%, rgba(0, 255, 0, 0.3) 100%);
        }
        body.biome-minus .milestone { border-top-color: rgba(0, 255, 0, 0.5); }
        body.biome-minus .milestone.major { border-top-color: #00ff00; }
        body.biome-minus .milestone::before { color: #ff00ff; /* Neon Magenta Accent */ }
        body.biome-minus #hud { background: rgba(34, 0, 34, 0.9); border-color: #00ff00; }
        body.biome-minus #depth-display { color: #ff00ff; }
        body.biome-minus #depth-label { color: #00ff00; }

        /* 2. THE CRUST (50m - 200m) */
        body.biome-crust { background-color: #e0c3fc; color: #2c3e50; }
        body.biome-crust #ruler { border-right-color: #2c3e50; background-image: linear-gradient(90deg, #2c3e50 0%, #2c3e50 100%), linear-gradient(90deg, rgba(44, 62, 80, 0.3) 0%, rgba(44, 62, 80, 0.3) 100%); }
        body.biome-crust .milestone { border-top-color: rgba(44, 62, 80, 0.5); }
        body.biome-crust .milestone.major { border-top-color: #2c3e50; }
        body.biome-crust #hud { background: rgba(224, 195, 252, 0.9); border-color: #2c3e50; }

        /* 3. THE TWILIGHT ZONE (200m - 1000m) */
        body.biome-twilight { background-color: #4b6cb7; color: #ffffff; }
        body.biome-twilight #ruler { border-right-color: rgba(255, 255, 255, 0.5); background-image: linear-gradient(90deg, #ffffff 0%, #ffffff 100%), linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 255, 255, 0.3) 100%); }
        body.biome-twilight .milestone { border-top-color: rgba(255, 255, 255, 0.5); }
        body.biome-twilight .milestone.major { border-top-color: #ffffff; }
        body.biome-twilight #hud { background: rgba(75, 108, 183, 0.9); border-color: #ffffff; }

        /* 4. THE MIDNIGHT ZONE (1000m - 4000m) */
        body.biome-midnight { background-color: #182848; color: #a2c2e0; }
        body.biome-midnight #ruler { border-right-color: rgba(162, 194, 224, 0.5); background-image: linear-gradient(90deg, #a2c2e0 0%, #a2c2e0 100%), linear-gradient(90deg, rgba(162, 194, 224, 0.3) 0%, rgba(162, 194, 224, 0.3) 100%); }
        body.biome-midnight .milestone { border-top-color: rgba(162, 194, 224, 0.5); }
        body.biome-midnight .milestone.major { border-top-color: #a2c2e0; }
        body.biome-midnight #hud { background: rgba(24, 40, 72, 0.9); border-color: #a2c2e0; }
        body.biome-midnight #depth-display { color: #ff4400; }

        /* 5. THE ABYSS (4000m - 8000m) */
        body.biome-abyss { background-color: #041b2d; color: #ff5555; }
        body.biome-abyss #ruler { border-right-color: rgba(255, 85, 85, 0.5); background-image: linear-gradient(90deg, #ff5555 0%, #ff5555 100%), linear-gradient(90deg, rgba(255, 85, 85, 0.3) 0%, rgba(255, 85, 85, 0.3) 100%); }
        body.biome-abyss .milestone { border-top-color: rgba(255, 85, 85, 0.5); }
        body.biome-abyss .milestone.major { border-top-color: #ff5555; }
        body.biome-abyss .milestone::before { color: #ff5555; }
        body.biome-abyss #hud { background: rgba(4, 27, 45, 0.9); border-color: #ff5555; }
        body.biome-abyss #depth-display { color: #ff5555; }

        /* 6. THE VOID (8000m+) */
        body.biome-void { background-color: #000000; color: #00ff00; }
        body.biome-void #ruler { border-right-color: rgba(0, 255, 0, 0.5); background-image: linear-gradient(90deg, #00ff00 0%, #00ff00 100%), linear-gradient(90deg, rgba(0, 255, 0, 0.3) 0%, rgba(0, 255, 0, 0.3) 100%); }
        body.biome-void .milestone { border-top-color: rgba(0, 255, 0, 0.5); }
        body.biome-void .milestone.major { border-top-color: #00ff00; }
        body.biome-void .milestone::before { color: #00ff00; }
        body.biome-void #hud { background: rgba(0, 0, 0, 0.9); border-color: #00ff00; }
        body.biome-void #depth-display { color: #00ff00; }

        @media (max-width: 600px) {
            #depth-display { font-size: 1.8rem; }
            .milestone { font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div id="ruler"></div>
    <div id="hud">
        <span id="depth-display">0.0000</span>
        <div id="depth-label">Meters Traveled</div>
    </div>

    <div id="intro">
        <h1>The Real Scroll</h1>
        <p><strong>Scale: 1:1</strong></p>
        <p>Calibrating pixels...</p>
        <p>1 Meter Scroll = 1 Meter Reality.</p>
        <button id="start-btn">Initialize</button>
    </div>

    <div id="world-container"></div>

    <script>
        // --- 1. CALIBRATION ---
        function getPhysicalPixelsPerMeter() {
            const div = document.createElement('div');
            div.style.height = '100cm';
            div.style.position = 'fixed';
            div.style.visibility = 'hidden';
            div.style.top = '0';
            document.body.appendChild(div);
            const px = div.getBoundingClientRect().height;
            document.body.removeChild(div);
            
            const basePx = px > 0 ? px : 3779.5;
            
            // FIX: Multiply by 1.477 for revised precision
            return basePx * 1.477;
        }

        const PIXELS_PER_METER = getPhysicalPixelsPerMeter();
        const BUFFER_PIXELS = 1000;

        console.log("Calibrated (1.477x correction): 1m =", PIXELS_PER_METER, "px");

        // Set ruler gradients
        const tick1cm = PIXELS_PER_METER / 100;
        const tick1mm = PIXELS_PER_METER / 1000;
        document.getElementById('ruler').style.backgroundSize = `20px ${tick1cm}px, 10px ${tick1mm}px`;

        // --- 2. DATA ---
        
        // Negative Data (The Minus World)
        const listMinus = [
            { m: -0.50, text: "Ceiling cat is watching" },
            { m: -1.50, text: "Your lost socks" },
            { m: -3.00, text: "Floating point rounding error" },
            { m: -5.00, text: "Australian ground level" },
            { m: -8.88, text: "The Upside Down" },
            { m: -12.00, text: "A stack overflow exception" },
            { m: -15.00, text: "The Cloud (It's just someone else's computer)" },
            { m: -20.00, text: "NULL POINTER EXCEPTION" }
        ];

        const listA = [
            { m: 0.01, text: "A standard grain of rice" },
            { m: 0.04, text: "A ping-pong ball diameter" },
            { m: 0.10, text: "A standard post-it note" },
            { m: 0.15, text: "A standard pen length" },
            { m: 0.45, text: "Height of a chair seat" },
            { m: 0.50, text: "A newborn baby (length)" },
            { m: 0.60, text: "Carry-on suitcase" },
            { m: 0.75, text: "Dining table height" },
            { m: 1.00, text: "--- ONE METER ---" },
            { m: 1.63, text: "Queen Elizabeth II" },
            { m: 1.75, text: "Avg Global Male Height" },
            { m: 2.00, text: "Darth Vader (in armor)" },
            { m: 2.44, text: "Men's High Jump Record" },
            { m: 2.72, text: "Tallest Man Ever (Wadlow)" },
            { m: 3.50, text: "Monster Truck Height" },
            { m: 4.50, text: "T-Rex Height" },
            { m: 5.50, text: "Two-Story House" },
            { m: 8.00, text: "London Routemaster Bus" },
            { m: 11.00, text: "Brachiosaurus" },
            { m: 13.70, text: "Hollywood Sign Letter" },
            { m: 20.00, text: "Sphinx Face Height" },
            { m: 25.00, text: "Blue Whale Length" },
            { m: 30.00, text: "Christ the Redeemer" },
            { m: 40.00, "text": "Deepest Scuba Dive" },
            { m: 46.00, text: "Statue of Liberty (Statue)" },
            { m: 55.00, text: "Leaning Tower of Pisa" },
            { m: 93.00, text: "Statue of Liberty (Total)" },
            { m: 96.00, text: "Big Ben Clock Tower" },
            { m: 139.00, text: "Kingda Ka Rollercoaster" },
            { m: 1008.00, text: "Jeddah Tower (Proposed)" },
            { m: 1642.00, text: "Lake Baikal Depth" },
            { m: 1991.00, text: "Akashi Kaikyo Bridge" },
            { m: 2100.00, text: "Voronya Cave Depth" },
            { m: 5000.00, text: "5K Run Distance" },
            { m: 5100.00, text: "La Rinconada City" },
            { m: 5642.00, text: "Mt. Elbrus" },
            { m: 6000.00, text: "--- 6 KILOMETERS ---" },
            { m: 6263.00, text: "Chimborazo" },
            { m: 7000.00, text: "Death Zone Begins" },
            { m: 8091.00, text: "Annapurna I" },
            { m: 8611.00, text: "K2" },
            { m: 8848.00, text: "MT. EVEREST SUMMIT" },
            { m: 10898.00, text: "Deepsea Challenger" },
            { m: 10994.00, text: "CHALLENGER DEEP" }
        ];

        const listB = [
            { "m": 0.03, "text": "Diameter of a US Quarter coin" },
            { "m": 0.05, "text": "Length of a AA battery" },
            { "m": 0.07, "text": "Length of a standard cigarette" },
            { "m": 0.08, "text": "Height of a LEGO minifigure" },
            { "m": 0.11, "text": "Diameter of a bagel" },
            { "m": 0.13, "text": "Height of a soda can" },
            { "m": 0.16, "text": "Length of a hot dog" },
            { "m": 0.18, "text": "A standard banana (for scale)" },
            { "m": 0.23, "text": "Size of a human foot (EU 42 / US 9)" },
            { "m": 0.26, "text": "Height of a bowling pin" },
            { "m": 0.29, "text": "Length of a Subway sandwich (footlong)" },
            { "m": 0.32, "text": "Height of an Oscar statuette" },
            { "m": 0.36, "text": "Length of a keyboard" },
            { "m": 0.41, "text": "Height of a bowling pin" },
            { "m": 0.44, "text": "Width of a broadsheet newspaper" },
            { "m": 0.48, "text": "Height of a bedside lamp" },
            { "m": 0.52, "text": "Tail length of a Ring-tailed Lemur" },
            { "m": 0.57, "text": "Height of a Mini Cooper tire" },
            { "m": 0.63, "text": "Height of a tombstone" },
            { "m": 0.68, "text": "Diameter of a giant pizza (26 inch)" },
            { "m": 0.72, "text": "Length of a skateboard" },
            { "m": 0.78, "text": "Height of a bar stool" },
            { "m": 0.82, "text": "Length of a baseball bat" },
            { "m": 0.88, "text": "Height of R2-D2 (Star Wars)" },
            { "m": 0.92, "text": "Length of a walking cane" },
            { "m": 0.98, "text": "Height of a fire hydrant" },
            { "m": 1.05, "text": "Length of a Katana sword" },
            { "m": 1.12, "text": "Height of a standard traffic cone stack" },
            { "m": 1.18, "text": "Wingspan of a Great Horned Owl" },
            { "m": 1.22, "text": "Height of Kenny Baker (played R2-D2)" },
            { "m": 1.35, "text": "Height of a standard refrigerator" },
            { "m": 1.42, "text": "Height of a parking meter" },
            { "m": 1.55, "text": "Length of a pool cue" },
            { "m": 1.65, "text": "Height of Napoleon Bonaparte" },
            { "m": 1.72, "text": "Height of Tom Cruise" },
            { "m": 1.80, "text": "Length of a single bed mattress" },
            { "m": 1.85, "text": "Width of a large grand piano" },
            { "m": 1.90, "text": "Height of Abraham Lincoln" },
            { "m": 1.98, "text": "Michael Jordan" },
            { "m": 2.06, "text": "Height of The Mountain (Game of Thrones)" },
            { "m": 2.13, "text": "Andre the Giant" },
            { "m": 2.25, "text": "Wingspan of a Golden Eagle" },
            { "m": 2.35, "text": "Height of a telephone booth (London)" },
            { "m": 2.55, "text": "Length of a Smart Car" },
            { "m": 2.65, "text": "Height of an Ostrich" },
            { "m": 2.80, "text": "Length of a Ping Pong table" },
            { "m": 2.90, "text": "Height of a grizzly bear (standing)" },
            { "m": 3.10, "text": "Length of a Mini Cooper" },
            { "m": 3.30, "text": "Height of an African Elephant" },
            { "m": 3.60, "text": "Length of a Great White Shark" },
            { "m": 3.90, "text": "Height of a single story (architecture)" },
            { "m": 4.20, "text": "Length of a VW Beetle" },
            { "m": 4.80, "text": "Height of a double stack of shipping containers" },
            { "m": 5.20, "text": "Length of a Cadillac Escalade" },
            { "m": 5.80, "text": "Height of a Giraffe's head" },
            { "m": 6.10, "text": "Length of a standard shipping container (20ft)" },
            { "m": 6.50, "text": "Length of a Triceratops" },
            { "m": 7.20, "text": "Width of a soccer goal" },
            { "m": 7.80, "text": "Length of a London Bus" },
            { "m": 8.50, "text": "Height of a two-story house + roof" },
            { "m": 9.20, "text": "Length of a Stegosaurus" },
            { "m": 9.80, "text": "Height of the Berlin Wall" },
            { "m": 10.50, "text": "Length of a Spinosaurus (largest carnivore)" },
            { "m": 11.50, "text": "Height of a telephone pole" },
            { "m": 12.20, "text": "Length of a standard shipping container (40ft)" },
            { "m": 13.50, "text": "Length of a semi-truck trailer" },
            { "m": 14.50, "text": "Height of the letters in the HOLLYWOOD sign" },
            { "m": 15.50, "text": "Length of a Sperm Whale" },
            { "m": 16.50, "text": "Height of a 5-story building" },
            { "m": 17.50, "text": "Length of a bowling lane" },
            { "m": 18.50, "text": "Height of the faces on Mt. Rushmore" },
            { "m": 19.50, "text": "Length of a Cricket pitch" },
            { "m": 21.00, "text": "Height of the High Roller (Las Vegas) cabin" },
            { "m": 22.00, "text": "Length of a Blue Whale calf" },
            { "m": 24.00, "text": "Height of the White House" },
            { "m": 26.00, "text": "Length of a diplomatic limousine (The Beast)" },
            { "m": 28.00, "text": "Height of the Brandenburg Gate" },
            { "m": 29.00, "text": "Wingspan of a Boeing 737" },
            { "m": 32.00, "text": "Length of the largest dinosaur (Argentinosaurus)" },
            { "m": 36.00, "text": "Length of the Space Shuttle Orbiter" },
            { "m": 38.00, "text": "Height of the Christ the Redeemer statue" },
            { "m": 42.00, "text": "Length of the history's longest limo ('The American Dream')" },
            { "m": 44.00, "text": "Height of the Pantheon (Rome)" },
            { "m": 48.00, "text": "Height of the Colosseum (outer wall)" },
            { "m": 52.00, "text": "Height of Niagara Falls" },
            { "m": 57.00, "text": "Height of the Cinderella Castle (Disney World)" },
            { "m": 62.00, "text": "Height of the Step Pyramid of Djoser" },
            { "m": 68.00, "text": "Wingspan of a Boeing 747" },
            { "m": 73.00, "text": "Length of an Airbus A380" },
            { "m": 77.00, "text": "Height of the Taj Mahal" },
            { "m": 82.00, "text": "Length of the International Space Station" },
            { "m": 88.00, "text": "Wingspan of the Spruce Goose (Hughes H-4)" },
            { "m": 92.00, "text": "Height of the US Capitol Building" },
            { "m": 105.00, "text": "Height of the Saturn V rocket" },
            { "m": 108.00, "text": "Original Godzilla height (1954)" },
            { "m": 112.00, "text": "Height of St. Paul's Cathedral (London)" },
            { "m": 119.00, "text": "Shin Godzilla height (2016)" },
            { "m": 125.00, "text": "Height of the Spring Temple Buddha" },
            { "m": 135.00, "text": "Height of the London Eye" },
            { "m": 145.00, "text": "Height of the Great Pyramid of Giza" },
            { "m": 155.00, "text": "Height of the Washington Monument" },
            { "m": 165.00, "text": "Height of the Singapore Flyer" },
            { "m": 175.00, "text": "Height of the Gherkin (London)" },
            { "m": 185.00, "text": "Height of the Space Needle (Seattle)" },
            { "m": 195.00, "text": "Height of the Gateway Arch (St. Louis)" },
            { "m": 210.00, "text": "Height of the Montparnasse Tower (Paris)" },
            { "m": 227.00, "text": "Height of the Golden Gate Bridge towers" },
            { "m": 240.00, "text": "Length of the Hindenburg Airship" },
            { "m": 260.00, "text": "Height of the Transamerica Pyramid" },
            { "m": 280.00, "text": "Height of the Chrysler Building" },
            { "m": 290.00, "text": "Depth of the deepest scuba dive ever" },
            { "m": 310.00, "text": "Height of the US Bank Tower (LA)" },
            { "m": 330.00, "text": "Height of the Tokyo Tower" },
            { "m": 360.00, "text": "Height of the Bank of America Tower (NYC)" },
            { "m": 400.00, "text": "Length of the Ever Given (Container ship)" },
            { "m": 420.00, "text": "Height of the Jin Mao Tower (Shanghai)" },
            { "m": 450.00, "text": "Height of the Empire State Building (tip)" },
            { "m": 480.00, "text": "Height of the International Commerce Centre (HK)" },
            { "m": 530.00, "text": "Height of the CTF Finance Centre" },
            { "m": 555.00, "text": "Height of the Lotte World Tower" },
            { "m": 601.00, "text": "Height of the Abraj Al-Bait Clock Tower" },
            { "m": 632.00, "text": "Height of the Shanghai Tower" },
            { "m": 700.00, "text": "Depth of the mesopelagic zone (Ocean)" },
            { "m": 750.00, "text": "Wait, are you still scrolling?" },
            { "m": 800.00, "text": "Height of the Burj Khalifa" },
            { "m": 850.00, "text": "Length of the Ultra-Large Crude Carrier (Seawise Giant) x 2" },
            { "m": 900.00, "text": "Depth where Giant Squids live" },
            { "m": 979.00, "text": "Height of Angel Falls (Venezuela)" },
            { "m": 1100.00, "text": "Deepest point of Lake Baikal" },
            { "m": 1200.00, "text": "Length of the Golden Gate Bridge span" },
            { "m": 1300.00, "text": "Height of the Grand Canyon (average)" },
            { "m": 1400.00, "text": "Depth where Sunlight completely vanishes (Ocean)" },
            { "m": 1600.00, "text": "One Mile (1.6 km)" },
            { "m": 1800.00, "text": "Depth of the Grand Canyon (max)" },
            { "m": 2000.00, "text": "2 KM - You have scrolled 2000 real meters" },
            { "m": 2200.00, "text": "Depth of the deepest cave (Veryovkina Cave)" },
            { "m": 2500.00, "text": "Crater depth of Mt. St. Helens" },
            { "m": 2800.00, "text": "Length of the Hollywood Walk of Fame" },
            { "m": 3200.00, "text": "Length of Central Park (NYC)" },
            { "m": 3500.00, "text": "Average depth of the Atlantic Ocean" },
            { "m": 3776.00, "text": "Height of Mount Fuji" },
            { "m": 4000.00, "text": "Freefall distance of Felix Baumgartner" },
            { "m": 4200.00, "text": "Average depth of the Pacific Ocean" },
            { "m": 4500.00, "text": "Height of the Matterhorn" },
            { "m": 4810.00, "text": "Height of Mont Blanc" },
            { "m": 5200.00, "text": "Base Camp of Mount Everest" },
            { "m": 5500.00, "text": "5.5 KM - Halfway to the bottom of the ocean" },
            { "m": 5895.00, "text": "Height of Mount Kilimanjaro" },
            { "m": 6190.00, "text": "Height of Denali (Mt McKinley)" },
            { "m": 6500.00, "text": "Deepest dive by a DSV Alvin" },
            { "m": 6960.00, "text": "Height of Mount Aconcagua" },
            { "m": 7500.00, "text": "Death Zone (Mount Everest oxygen levels drop)" },
            { "m": 8000.00, "text": "Cruising altitude of small propeller planes" },
            { "m": 8200.00, "text": "Deepest fish ever filmed (Snailfish)" },
            { "m": 8500.00, "text": "Height of K2" },
            { "m": 8848.00, "text": "The Peak of Mount Everest" },
            { "m": 9000.00, "text": "Flight altitude of commercial airliners" },
            { "m": 9500.00, "text": "Maximum depth of the Izu-Ogasawara Trench" },
            { "m": 10000.00, "text": "10 KILOMETERS. That is a 10k run." },
            { "m": 10400.00, "text": "Depth of the Tonga Trench" },
            { "m": 10898.00, "text": "Depth of the Challenger Deep (James Cameron's dive)" },
            { "m": 10935.00, "text": "THE BOTTOM (Trieste Bathyscaphe record)" },
            { "m": 11000.00, "text": "--- END OF THE WORLD (Refresh to climb back up) ---" }
        ];

        let merged = listMinus.concat(listA, listB);
        merged.sort((a, b) => a.m - b.m);

        const milestones = [];
        let lastAcceptedM = -100;

        for (const item of merged) {
            let minGap = 0;
            if (item.m < 0.5) minGap = 0.03;
            else if (item.m < 2.0) minGap = 0.05;

            if (item.m - lastAcceptedM >= minGap - 0.0001) {
                // We store absolute physical pixels. 
                // The renderer will calculate viewport relative position.
                const finalItem = {
                    ...item,
                    absoluteY: Math.floor(item.m * PIXELS_PER_METER)
                };
                milestones.push(finalItem);
                lastAcceptedM = item.m;
            }
        }

        // --- 3. RENDER ENGINE & TREADMILL ---
        const worldContainer = document.getElementById('world-container');
        const depthDisplay = document.getElementById('depth-display');
        const depthLabel = document.getElementById('depth-label');
        const hud = document.getElementById('hud');
        const ruler = document.getElementById('ruler');
        const intro = document.getElementById('intro');
        const startBtn = document.getElementById('start-btn');
        const body = document.body;

        const activeNodes = new Map();

        // TREADMILL VARIABLES
        const LOOP_HEIGHT = 200000; // Physical CSS height of body
        const JUMP_THRESHOLD = 150000;
        const RESET_TARGET = 50000; 
        
        // This tracks the total pixels scrolled including the loops
        let globalScrollOffset = 0; // Initialize at 0 for Solid Ground
        let lastScrollY = 0;
        let isBananaMode = false;

        // Easter Egg: Konami Code
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;

        function init() {
            body.style.height = `${LOOP_HEIGHT}px`;
            
            startBtn.addEventListener('click', () => {
                intro.style.display = 'none';
                window.scrollTo(0, 0); 
            });

            // Banana Toggle
            hud.addEventListener('click', () => {
                isBananaMode = !isBananaMode;
                depthLabel.textContent = isBananaMode ? "Bananas Traveled" : "Meters Traveled";
            });

            // Konami Listener
            document.addEventListener('keydown', (e) => {
                if (e.key === konamiCode[konamiIndex]) {
                    konamiIndex++;
                    if (konamiIndex === konamiCode.length) {
                        document.documentElement.style.filter = 
                            document.documentElement.style.filter === 'invert(1)' ? 'none' : 'invert(1)';
                        konamiIndex = 0;
                    }
                } else {
                    konamiIndex = 0;
                }
            });

            requestAnimationFrame(renderLoop);
        }

        let lastBiomeClass = '';

        function updateBiome(meters) {
            let biome = '';
            // Determine biome string
            if (meters < 0) biome = 'biome-minus';
            else if (meters < 50) {} // Default (empty)
            else if (meters < 200) biome = 'biome-crust';
            else if (meters < 1000) biome = 'biome-twilight';
            else if (meters < 4000) biome = 'biome-midnight';
            else if (meters < 8000) biome = 'biome-abyss';
            else biome = 'biome-void';

            if (biome !== lastBiomeClass) {
                // Remove known biome classes only, so we don't strip Easter Eggs
                body.classList.remove('biome-minus', 'biome-crust', 'biome-twilight', 'biome-midnight', 'biome-abyss', 'biome-void');
                
                if (biome) body.classList.add(biome);
                lastBiomeClass = biome;
            }
        }

        function toggleEffect(el, cls, active) {
            if (active) {
                if (!el.classList.contains(cls)) el.classList.add(cls);
            } else {
                if (el.classList.contains(cls)) el.classList.remove(cls);
            }
        }

        function renderLoop() {
            let currentScrollY = window.scrollY;

            // --- TREADMILL LOGIC (The One-Way Trip) ---
            
            // 1. DOWNWARD: Standard infinite scroll logic
            if (currentScrollY > JUMP_THRESHOLD) {
                window.scrollTo(0, RESET_TARGET);
                globalScrollOffset += (currentScrollY - RESET_TARGET);
                currentScrollY = RESET_TARGET;
                // Avoid Shake on jump
                lastScrollY = currentScrollY;
            } 
            
            // 2. UPWARD (THE GLITCH): 
            // If user hits the absolute ceiling (0) AND has scrolled deep enough to have an offset
            if (currentScrollY === 0 && globalScrollOffset > 0) {
                 // TELEPORT TO MINUS WORLD
                 globalScrollOffset = -50000; // Negative offset
                 window.scrollTo(0, 25000);   // Middle of negative buffer
                 currentScrollY = 25000;
                 lastScrollY = currentScrollY;
                 
                 // Flash Effect
                 if (!document.body.classList.contains('bad-luck')) {
                     document.body.classList.add('bad-luck');
                     setTimeout(() => document.body.classList.remove('bad-luck'), 200);
                }
            }
            
            // 3. MINUS WORLD INFINITE SCROLL
            // If we are already in the negative zone, enable upward looping
            if (globalScrollOffset < 0 && currentScrollY < 10000) {
                 const jumpDest = 110000; 
                 const jumpDiff = 110000 - currentScrollY;
                 
                 window.scrollTo(0, jumpDest);
                 globalScrollOffset -= jumpDiff;
                 currentScrollY = jumpDest;
                 lastScrollY = currentScrollY;
            }

            const totalGlobalPixels = globalScrollOffset + currentScrollY;
            const currentMeters = totalGlobalPixels / PIXELS_PER_METER;

            // --- EASTER EGGS: SHAKE ---
            const delta = Math.abs(currentScrollY - lastScrollY);
            if (delta > 100) { // Turbulence Threshold
                if (!worldContainer.classList.contains('shake-screen')) {
                    worldContainer.classList.add('shake-screen');
                    setTimeout(() => worldContainer.classList.remove('shake-screen'), 500);
                }
            }
            lastScrollY = currentScrollY;

            // --- EASTER EGGS: SPECIAL NUMBERS ---
            let overrideLabel = null;
            let overrideDisplay = null;
            let addClass = null;

            // 1. 404 / Minus World Label
            if (currentMeters < 0) {
                overrideLabel = "ERROR: OUT OF BOUNDS";
            } else if (currentMeters >= 400 && currentMeters <= 405) {
                addClass = 'hud-glitch';
            }
            
            // 2. Pi (3.14 - 3.15)
            if (currentMeters >= 3.14 && currentMeters < 3.15) {
                overrideDisplay = "Ï€";
            }

            // 3. The Answer (42.00 - 42.05)
            if (currentMeters >= 42.00 && currentMeters < 42.05) {
                addClass = 'hud-answer';
                overrideLabel = "THE ANSWER";
            }
            
            // 4. Evil Number (6.66)
            if (currentMeters >= 6.66 && currentMeters < 6.67) {
                addClass = 'hud-evil';
                overrideLabel = "EVIL NUMBER";
            }

            // 5. Gravity (9.81)
            if (currentMeters >= 9.81 && currentMeters < 9.82) {
                overrideLabel = "GRAVITY (g)";
            }
            
            // 6. Rotated (33.00)
            if (currentMeters >= 33.00 && currentMeters < 33.05) {
                addClass = 'hud-rotated';
            }
            
            // 7. Jackpot (77.77)
            if (currentMeters >= 77.77 && currentMeters < 77.78) {
                addClass = 'hud-jackpot';
                overrideLabel = "JACKPOT";
            }

            // 8. Bad Luck (13.00 - 13.05)
            if (currentMeters >= 13.00 && currentMeters < 13.05) {
                if (!document.body.classList.contains('bad-luck')) {
                     document.body.classList.add('bad-luck');
                     setTimeout(() => document.body.classList.remove('bad-luck'), 100);
                }
            }
            
            // --- VISUAL EASTER EGGS (VISUALS) ---
            // 51.00m (Area 51)
            toggleEffect(document.body, 'egg-alien', currentMeters >= 50.9 && currentMeters <= 51.1);
            
            // 69.00m (Nice)
            toggleEffect(document.body, 'egg-disco', currentMeters >= 68.9 && currentMeters <= 69.1);

            // 88.00m (Speed)
            toggleEffect(worldContainer, 'egg-speed', currentMeters >= 87.9 && currentMeters <= 88.1);
            
            // -11.11m (Mirror - Negative only)
            toggleEffect(document.body, 'egg-mirror', currentMeters >= -11.21 && currentMeters <= -11.01);

            // 44.44m (Ghost)
            toggleEffect(worldContainer, 'egg-ghost', currentMeters >= 44.34 && currentMeters <= 44.54);


            // Apply classes
            hud.className = ''; // Reset
            if (addClass) hud.classList.add(addClass);

            // Set Label
            if (overrideLabel) {
                depthLabel.textContent = overrideLabel;
            } else {
                depthLabel.textContent = isBananaMode ? "Bananas Traveled" : "Meters Traveled";
            }

            // --- UI UPDATE ---
            if (overrideDisplay) {
                depthDisplay.textContent = overrideDisplay;
            } else {
                let displayVal = currentMeters;
                if (isBananaMode) displayVal = currentMeters / 0.18;
                depthDisplay.textContent = displayVal.toFixed(isBananaMode ? 1 : 4);
            }

            // Ruler Background Logic (Infinite)
            // Just offset the background pattern by the global pixels
            ruler.style.backgroundPosition = `0 -${totalGlobalPixels}px`;
            
            updateBiome(currentMeters);

            // --- VIRTUAL DOM RENDERER ---
            // We only render items that are visible in the viewport [0, window.innerHeight]
            // screenY = absoluteItemY - totalGlobalPixels
            
            const viewportHeight = window.innerHeight;
            
            for (let i = 0; i < milestones.length; i++) {
                const ms = milestones[i];
                const screenY = ms.absoluteY - totalGlobalPixels;

                // Render buffer of 1000px above/below
                const isVisible = screenY >= -1000 && screenY <= (viewportHeight + 1000);

                if (isVisible) {
                    if (!activeNodes.has(i)) {
                        createNode(i, ms);
                    }
                    // Update position
                    const node = activeNodes.get(i);
                    node.style.transform = `translateY(${screenY}px)`;
                } else {
                    if (activeNodes.has(i)) {
                        removeNode(i);
                    }
                }
            }
            requestAnimationFrame(renderLoop);
        }

        function createNode(index, data) {
            const el = document.createElement('div');
            el.className = 'milestone';
            if (data.m % 100 === 0 || data.m === 1) el.classList.add('major');
            
            el.textContent = data.text;
            el.setAttribute('data-depth', `${data.m}m`);
            
            // For virtual rendering, we set top to 0 and move via transform in the loop
            el.style.top = '0px'; 
            
            worldContainer.appendChild(el);
            activeNodes.set(index, el);
        }

        function removeNode(index) {
            const el = activeNodes.get(index);
            if (el && el.parentNode) {
                el.parentNode.removeChild(el);
            }
            activeNodes.delete(index);
        }

        init();
    </script>
</body>
</html>